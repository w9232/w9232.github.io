<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>幸运抓阄 - 多人在线抽签工具</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3B82F6',
            secondary: '#10B981',
            accent: '#F59E0B',
            dark: '#1F2937',
            light: '#F9FAFB'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .animate-spin-slow {
        animation: spin 3s linear infinite;
      }
      .animate-bounce-slow {
        animation: bounce 2s infinite;
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen font-sans text-dark">
  <!-- 顶部导航 -->
  <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-random text-primary text-2xl"></i>
        <h1 class="text-[clamp(1.25rem,3vw,1.75rem)] font-bold text-dark">幸运抓阄</h1>
      </div>
      <div class="flex items-center space-x-4">
        <span id="online-count" class="hidden md:flex items-center text-sm bg-primary/10 text-primary px-3 py-1 rounded-full">
          <i class="fa fa-users mr-1"></i>
          <span>在线: <span id="user-count">1</span></span>
        </span>
        <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
          <i class="fa fa-moon-o text-gray-600"></i>
        </button>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8 max-w-5xl">
    <!-- 介绍卡片 -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-8 transform transition-all hover:shadow-lg">
      <h2 class="text-xl font-semibold mb-2 text-primary">多人在线抓阄工具</h2>
      <p class="text-gray-600 mb-4">简单公平的随机抽签工具，支持多人同时在线参与，由主持人进行抽签，结果实时同步给所有参与者。</p>
      <div class="flex flex-wrap gap-3">
        <div class="flex items-center text-sm text-gray-500">
          <i class="fa fa-check-circle text-secondary mr-1"></i>
          <span>公平随机算法</span>
        </div>
        <div class="flex items-center text-sm text-gray-500">
          <i class="fa fa-check-circle text-secondary mr-1"></i>
          <span>实时结果同步</span>
        </div>
        <div class="flex items-center text-sm text-gray-500">
          <i class="fa fa-check-circle text-secondary mr-1"></i>
          <span>多人在线参与</span>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- 左侧：参与者管理 -->
      <div class="lg:col-span-1 space-y-6">
        <!-- 添加参与者 -->
        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
          <h3 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fa fa-user-plus text-primary mr-2"></i>
            添加参与者
          </h3>
          <div class="flex gap-2">
            <input 
              type="text" 
              id="participant-name" 
              placeholder="输入参与者姓名" 
              class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all"
            >
            <button 
              id="add-participant" 
              class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-all flex items-center"
            >
              <i class="fa fa-plus mr-1"></i> 添加
            </button>
          </div>
          <div class="mt-4 text-sm text-gray-500">
            <i class="fa fa-info-circle mr-1"></i>
            <span>最多可添加30名参与者</span>
          </div>
        </div>

        <!-- 参与者列表 -->
        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold flex items-center">
              <i class="fa fa-list-ul text-primary mr-2"></i>
              参与者列表
            </h3>
            <span id="participant-count" class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full">
              0人
            </span>
          </div>
          
          <div id="participants-container" class="max-h-[300px] overflow-y-auto pr-2 space-y-2">
            <div class="text-center text-gray-400 py-8 border border-dashed border-gray-200 rounded-lg">
              <i class="fa fa-users text-3xl mb-2 opacity-30"></i>
              <p>暂无参与者，请添加</p>
            </div>
          </div>
          
          <div class="mt-4 flex justify-between">
            <button 
              id="clear-participants" 
              class="text-gray-500 hover:text-red-500 text-sm transition-colors flex items-center opacity-70 hover:opacity-100"
              disabled
            >
              <i class="fa fa-trash mr-1"></i> 清空列表
            </button>
            <button 
              id="import-names" 
              class="text-gray-500 hover:text-primary text-sm transition-colors flex items-center"
            >
              <i class="fa fa-upload mr-1"></i> 批量导入
            </button>
          </div>
        </div>
      </div>

      <!-- 右侧：抽签区域 -->
      <div class="lg:col-span-2 space-y-6">
        <!-- 抽签控制区 -->
        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
          <h3 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fa fa-random text-accent mr-2"></i>
            抽签区
          </h3>
          
          <div class="flex flex-col items-center py-6">
            <div id="draw-result" class="mb-8 w-full max-w-md h-40 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-xl bg-gray-50 transition-all">
              <div class="text-center text-gray-400">
                <i class="fa fa-trophy text-4xl mb-2 opacity-30"></i>
                <p>抽签结果将显示在这里</p>
              </div>
            </div>
            
            <button 
              id="start-draw" 
              class="bg-accent hover:bg-accent/90 text-white px-8 py-3 rounded-lg text-lg font-medium transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-accent/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"
              disabled
            >
              <i class="fa fa-play mr-2"></i> 开始抽签
            </button>
          </div>
        </div>

        <!-- 历史记录 -->
        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold flex items-center">
              <i class="fa fa-history text-primary mr-2"></i>
              抽签历史
            </h3>
            <button 
              id="clear-history" 
              class="text-gray-500 hover:text-red-500 text-sm transition-colors flex items-center opacity-70 hover:opacity-100"
              disabled
            >
              <i class="fa fa-trash mr-1"></i> 清空历史
            </button>
          </div>
          
          <div id="history-container" class="max-h-[200px] overflow-y-auto space-y-3">
            <div class="text-center text-gray-400 py-6 border border-dashed border-gray-200 rounded-lg">
              <p>暂无抽签记录</p>
            </div>
          </div>
        </div>

        <!-- 使用说明 -->
        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
          <h3 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fa fa-info-circle text-primary mr-2"></i>
            使用说明
          </h3>
          
          <ul class="space-y-2 text-gray-600 text-sm">
            <li class="flex items-start">
              <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
              <span>主持人添加所有参与抽签的人员名单</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
              <span>其他参与者打开同一页面即可同步查看</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
              <span>点击"开始抽签"按钮，系统将随机选择一名幸运者</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
              <span>抽签结果将实时展示给所有在线参与者</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <!-- 批量导入模态框 -->
  <div id="import-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl shadow-xl w-full max-w-md p-6 transform transition-all scale-95 opacity-0" id="modal-content">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">批量导入参与者</h3>
        <button id="close-modal" class="text-gray-400 hover:text-gray-600">
          <i class="fa fa-times"></i>
        </button>
      </div>
      <p class="text-sm text-gray-500 mb-4">请输入参与者姓名，每行一个</p>
      <textarea 
        id="batch-names" 
        rows="8" 
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all text-sm"
        placeholder="张三&#10;李四&#10;王五&#10;..."></textarea>
      <div class="mt-4 flex justify-end gap-2">
        <button id="cancel-import" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors">
          取消
        </button>
        <button id="confirm-import" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
          确认导入
        </button>
      </div>
    </div>
  </div>

  <!-- 底部信息 -->
  <footer class="bg-white/80 backdrop-blur-md mt-12 py-6 border-t">
    <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
      <p>幸运抓阄 &copy; 2023 - 公平、公正、公开的在线抽签工具</p>
    </div>
  </footer>

  <script>
    // 全局状态管理
    const state = {
      participants: [],
      history: [],
      isDrawing: false,
      currentWinner: null,
      // 使用localStorage模拟实时同步
      syncKey: 'drawToolData'
    };

    // DOM元素
    const elements = {
      participantName: document.getElementById('participant-name'),
      addParticipant: document.getElementById('add-participant'),
      participantsContainer: document.getElementById('participants-container'),
      participantCount: document.getElementById('participant-count'),
      clearParticipants: document.getElementById('clear-participants'),
      startDraw: document.getElementById('start-draw'),
      drawResult: document.getElementById('draw-result'),
      historyContainer: document.getElementById('history-container'),
      clearHistory: document.getElementById('clear-history'),
      importNames: document.getElementById('import-names'),
      importModal: document.getElementById('import-modal'),
      modalContent: document.getElementById('modal-content'),
      closeModal: document.getElementById('close-modal'),
      cancelImport: document.getElementById('cancel-import'),
      confirmImport: document.getElementById('confirm-import'),
      batchNames: document.getElementById('batch-names'),
      userCount: document.getElementById('user-count'),
      themeToggle: document.getElementById('theme-toggle')
    };

    // 初始化
    function init() {
      // 从本地存储加载数据
      loadFromStorage();
      
      // 渲染初始数据
      renderParticipants();
      renderHistory();
      updateButtonsState();
      
      // 设置事件监听
      setupEventListeners();
      
      // 模拟在线用户计数
      updateOnlineCount();
      
      // 监听存储变化，实现多窗口同步
      window.addEventListener('storage', handleStorageChange);
    }

    // 事件监听设置
    function setupEventListeners() {
      // 添加参与者
      elements.addParticipant.addEventListener('click', addParticipant);
      
      // 按Enter键添加参与者
      elements.participantName.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          addParticipant();
        }
      });
      
      // 清空参与者
      elements.clearParticipants.addEventListener('click', clearParticipants);
      
      // 开始抽签
      elements.startDraw.addEventListener('click', startDraw);
      
      // 清空历史
      elements.clearHistory.addEventListener('click', clearHistory);
      
      // 批量导入相关
      elements.importNames.addEventListener('click', openImportModal);
      elements.closeModal.addEventListener('click', closeImportModal);
      elements.cancelImport.addEventListener('click', closeImportModal);
      elements.confirmImport.addEventListener('click', importParticipants);
      
      // 主题切换
      elements.themeToggle.addEventListener('click', toggleTheme);
    }

    // 添加参与者
    function addParticipant() {
      const name = elements.participantName.value.trim();
      
      if (!name) {
        showToast('请输入参与者姓名', 'warning');
        return;
      }
      
      if (state.participants.includes(name)) {
        showToast('该参与者已存在', 'warning');
        return;
      }
      
      if (state.participants.length >= 30) {
        showToast('最多只能添加30名参与者', 'warning');
        return;
      }
      
      state.participants.push(name);
      elements.participantName.value = '';
      
      saveToStorage();
      renderParticipants();
      updateButtonsState();
      showToast(`已添加: ${name}`, 'success');
    }

    // 渲染参与者列表
    function renderParticipants() {
      elements.participantCount.textContent = `${state.participants.length}人`;
      
      if (state.participants.length === 0) {
        elements.participantsContainer.innerHTML = `
          <div class="text-center text-gray-400 py-8 border border-dashed border-gray-200 rounded-lg">
            <i class="fa fa-users text-3xl mb-2 opacity-30"></i>
            <p>暂无参与者，请添加</p>
          </div>
        `;
        return;
      }
      
      elements.participantsContainer.innerHTML = '';
      
      state.participants.forEach((name, index) => {
        const participantEl = document.createElement('div');
        participantEl.className = 'flex justify-between items-center p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors';
        participantEl.innerHTML = `
          <div class="flex items-center">
            <span class="inline-flex items-center justify-center w-6 h-6 bg-primary/10 text-primary rounded-full text-xs mr-2">${index + 1}</span>
            <span>${name}</span>
          </div>
          <button class="delete-participant text-gray-400 hover:text-red-500 p-1 transition-colors" data-index="${index}">
            <i class="fa fa-times"></i>
          </button>
        `;
        
        elements.participantsContainer.appendChild(participantEl);
      });
      
      // 添加删除事件监听
      document.querySelectorAll('.delete-participant').forEach(button => {
        button.addEventListener('click', (e) => {
          const index = parseInt(e.currentTarget.dataset.index);
          const deletedName = state.participants.splice(index, 1)[0];
          
          saveToStorage();
          renderParticipants();
          updateButtonsState();
          showToast(`已移除: ${deletedName}`, 'info');
        });
      });
    }

    // 清空参与者
    function clearParticipants() {
      if (confirm('确定要清空所有参与者吗？')) {
        state.participants = [];
        saveToStorage();
        renderParticipants();
        updateButtonsState();
        showToast('已清空所有参与者', 'info');
      }
    }

    // 开始抽签
    function startDraw() {
      if (state.participants.length < 1) {
        showToast('请先添加参与者', 'warning');
        return;
      }
      
      if (state.isDrawing) return;
      
      state.isDrawing = true;
      elements.startDraw.disabled = true;
      elements.startDraw.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i> 抽签中...';
      
      // 动画效果：快速切换显示不同的参与者
      const drawResult = elements.drawResult;
      drawResult.innerHTML = '';
      drawResult.classList.add('border-primary');
      
      const interval = 50; // 切换速度，毫秒
      const duration = 3000; // 总时长，毫秒
      const totalSteps = duration / interval;
      let step = 0;
      
      const drawInterval = setInterval(() => {
        step++;
        // 随机选择一个参与者
        const randomIndex = Math.floor(Math.random() * state.participants.length);
        const randomParticipant = state.participants[randomIndex];
        
        // 更新显示
        drawResult.innerHTML = `
          <div class="text-center">
            <div class="text-2xl font-bold text-gray-700">${randomParticipant}</div>
          </div>
        `;
        
        // 结束抽签
        if (step >= totalSteps) {
          clearInterval(drawInterval);
          state.isDrawing = false;
          state.currentWinner = randomParticipant;
          
          // 显示最终结果
          drawResult.innerHTML = `
            <div class="text-center">
              <div class="inline-block p-2 bg-accent/10 rounded-full mb-2">
                <i class="fa fa-trophy text-3xl text-accent"></i>
              </div>
              <div class="text-3xl font-bold text-gray-800 animate-bounce-slow">${randomParticipant}</div>
              <div class="text-gray-500 mt-1">恭喜中奖！</div>
            </div>
          `;
          
          // 更新历史记录
          addToHistory(randomParticipant);
          
          // 恢复按钮状态
          elements.startDraw.disabled = false;
          elements.startDraw.innerHTML = '<i class="fa fa-play mr-2"></i> 开始抽签';
          
          showToast(`恭喜 ${randomParticipant} 中奖！`, 'success');
        }
      }, interval);
    }

    // 添加到历史记录
    function addToHistory(winner) {
      const now = new Date();
      const timeStr = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
      
      state.history.unshift({
        winner,
        time: timeStr,
        timestamp: now.getTime()
      });
      
      // 只保留最近20条记录
      if (state.history.length > 20) {
        state.history = state.history.slice(0, 20);
      }
      
      saveToStorage();
      renderHistory();
    }

    // 渲染历史记录
    function renderHistory() {
      elements.clearHistory.disabled = state.history.length === 0;
      
      if (state.history.length === 0) {
        elements.historyContainer.innerHTML = `
          <div class="text-center text-gray-400 py-6 border border-dashed border-gray-200 rounded-lg">
            <p>暂无抽签记录</p>
          </div>
        `;
        return;
      }
      
      elements.historyContainer.innerHTML = '';
      
      state.history.forEach((record, index) => {
        const historyItem = document.createElement('div');
        historyItem.className = `p-3 rounded-lg ${index === 0 ? 'bg-accent/5 border border-accent/20' : 'bg-gray-50'}`;
        historyItem.innerHTML = `
          <div class="flex justify-between items-center">
            <div>
              <div class="font-medium">${record.winner}</div>
              <div class="text-xs text-gray-500">${record.time}</div>
            </div>
            ${index === 0 ? '<span class="bg-accent/10 text-accent text-xs px-2 py-0.5 rounded-full">最新</span>' : ''}
          </div>
        `;
        
        elements.historyContainer.appendChild(historyItem);
      });
    }

    // 清空历史记录
    function clearHistory() {
      if (confirm('确定要清空所有抽签历史吗？')) {
        state.history = [];
        saveToStorage();
        renderHistory();
        showToast('已清空抽签历史', 'info');
      }
    }

    // 打开批量导入模态框
    function openImportModal() {
      elements.importModal.classList.remove('hidden');
      // 触发动画
      setTimeout(() => {
        elements.modalContent.classList.remove('scale-95', 'opacity-0');
        elements.modalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
      elements.batchNames.focus();
    }

    // 关闭批量导入模态框
    function closeImportModal() {
      elements.modalContent.classList.remove('scale-100', 'opacity-100');
      elements.modalContent.classList.add('scale-95', 'opacity-0');
      setTimeout(() => {
        elements.importModal.classList.add('hidden');
        elements.batchNames.value = '';
      }, 300);
    }

    // 导入参与者
    function importParticipants() {
      const text = elements.batchNames.value.trim();
      
      if (!text) {
        showToast('请输入参与者姓名', 'warning');
        return;
      }
      
      // 按行分割，过滤空行和重复项
      const names = text.split('\n')
        .map(name => name.trim())
        .filter(name => name)
        .filter((name, index, self) => self.indexOf(name) === index);
      
      if (names.length === 0) {
        showToast('未找到有效的参与者姓名', 'warning');
        return;
      }
      
      // 检查总数量是否超过限制
      const totalAfterImport = state.participants.length + names.length;
      if (totalAfterImport > 30) {
        showToast(`导入后将超过30人限制，当前可导入${30 - state.participants.length}人`, 'warning');
        return;
      }
      
      // 过滤掉已存在的参与者
      const newNames = names.filter(name => !state.participants.includes(name));
      
      if (newNames.length === 0) {
        showToast('所有参与者已存在', 'info');
        closeImportModal();
        return;
      }
      
      // 添加新参与者
      state.participants.push(...newNames);
      
      saveToStorage();
      renderParticipants();
      updateButtonsState();
      showToast(`已成功导入 ${newNames.length} 名参与者`, 'success');
      
      closeImportModal();
    }

    // 更新按钮状态
    function updateButtonsState() {
      const hasParticipants = state.participants.length > 0;
      elements.clearParticipants.disabled = !hasParticipants;
      elements.startDraw.disabled = !hasParticipants || state.isDrawing;
    }

    // 保存数据到本地存储
    function saveToStorage() {
      const data = {
        participants: state.participants,
        history: state.history
      };
      
      localStorage.setItem(state.syncKey, JSON.stringify(data));
    }

    // 从本地存储加载数据
    function loadFromStorage() {
      const dataStr = localStorage.getItem(state.syncKey);
      
      if (dataStr) {
        try {
          const data = JSON.parse(dataStr);
          if (data.participants) state.participants = data.participants;
          if (data.history) state.history = data.history;
        } catch (e) {
          console.error('Failed to parse data from storage', e);
          // 清除损坏的数据
          localStorage.removeItem(state.syncKey);
        }
      }
    }

    // 处理存储变化事件，实现多窗口同步
    function handleStorageChange(e) {
      if (e.key !== state.syncKey) return;
      
      loadFromStorage();
      renderParticipants();
      renderHistory();
      updateButtonsState();
      
      // 如果有新的抽签结果，显示提示
      if (state.history.length > 0) {
        const lastWinner = state.history[0].winner;
        showToast(`最新抽签结果: ${lastWinner}`, 'info');
      }
    }

    // 显示提示消息
    function showToast(message, type = 'info') {
      // 检查是否已有toast，如有则移除
      const existingToast = document.querySelector('.toast-notification');
      if (existingToast) {
        existingToast.remove();
      }
      
      // 创建toast元素
      const toast = document.createElement('div');
      
      // 设置样式和图标
      let bgColor, icon;
      switch (type) {
        case 'success':
          bgColor = 'bg-secondary';
          icon = 'fa-check-circle';
          break;
        case 'warning':
          bgColor = 'bg-accent';
          icon = 'fa-exclamation-triangle';
          break;
        case 'error':
          bgColor = 'bg-red-500';
          icon = 'fa-times-circle';
          break;
        default:
          bgColor = 'bg-primary';
          icon = 'fa-info-circle';
      }
      
      toast.className = `toast-notification fixed bottom-4 right-4 ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg transform translate-y-10 opacity-0 transition-all duration-300 z-50 flex items-center`;
      toast.innerHTML = `
        <i class="fa ${icon} mr-2"></i>
        <span>${message}</span>
      `;
      
      // 添加到页面
      document.body.appendChild(toast);
      
      // 显示动画
      setTimeout(() => {
        toast.classList.remove('translate-y-10', 'opacity-0');
        toast.classList.add('translate-y-0', 'opacity-100');
      }, 10);
      
      // 3秒后自动消失
      setTimeout(() => {
        toast.classList.remove('translate-y-0', 'opacity-100');
        toast.classList.add('translate-y-10', 'opacity-0');
        
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 3000);
    }

    // 模拟在线用户计数
    function updateOnlineCount() {
      // 生成1-10的随机数模拟在线用户数
      const count = Math.floor(Math.random() * 10) + 1;
      elements.userCount.textContent = count;
      
      // 每30秒更新一次
      setTimeout(updateOnlineCount, 30000);
    }

    // 切换主题
    function toggleTheme() {
      const isDark = document.body.classList.toggle('dark-mode');
      const icon = elements.themeToggle.querySelector('i');
      
      if (isDark) {
        document.body.classList.add('bg-gray-900', 'text-white');
        document.body.classList.remove('bg-gradient-to-br', 'from-blue-50', 'to-indigo-50', 'text-dark');
        icon.classList.remove('fa-moon-o');
        icon.classList.add('fa-sun-o');
      } else {
        document.body.classList.remove('bg-gray-900', 'text-white');
        document.body.classList.add('bg-gradient-to-br', 'from-blue-50', 'to-indigo-50', 'text-dark');
        icon.classList.remove('fa-sun-o');
        icon.classList.add('fa-moon-o');
      }
    }

    // 启动应用
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
